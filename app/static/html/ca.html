<div data-extend-template="/html/base.html">

	<!-- Nav Bar -->
	<ul data-block-append="menu_links">
		<li><a href="/api/login/endauth">Log Out</a></li>
    	<li><a href="/#/admin">Administration</a></li>
	</ul>

	<!-- Content --> 
	<div data-block-append="content">
	<div class="container">
   	<br />

    <!-- Buttons -->
    <div class="row">
      <a class="waves-effect waves-light btn btn-tall btn-full {{ $db.get_question_list().length > 0 ? '' : 'disabled' }}" id="answer-btn" ng-click="$db.get_question_list().length > 0 ? $db.answer_question() : null">
        Answer question
      </a>
    </div>

    <div class="row">
      <a id="go_offline_btn" ng-if="user.is_online" ng-click="$db.go_offline()" class="waves-effect waves-light btn btn-half orange">Go Offline</a>
      <a id="go_online_btn" ng-if="!(user.is_online)" ng-click="$db.go_online()" class="waves-effect waves-light btn btn-half green">Go Online</a>
      <a id="close_queue_btn" ng-if="$db.model['queue_meta'][0].open" ng-click="$db.close_queue()" class="waves-effect waves-light btn btn-half red">Close Queue</a>
      <a id="open_queue_btn" ng-if="!($db.model['queue_meta'][0].open)" ng-click="$db.open_queue()" class="waves-effect waves-light btn btn-half blue">Open Queue</a>
    </div>


    <!-- Status info -->
    <div class="row">
      <div class="card">
        <div class="card-content">
          <span class="card-title black-text">
            Happening now
          </span>
          <div class="divider"></div>
          <h4>
            <span class="grey-text"><small>The queue is </small></span>
            <span class="green-text" ng-if="$db.model.queue_meta[0].open">open</span>
            <span class="red-text" ng-if="!$db.model.queue_meta[0].open">closed</span>
            <span class="grey-text"><small>.</small></span>
          </h4>
          <h4>
            <span>{{ $db.n_open_questions() === 0 ? 'No' : $db.n_open_questions() }} student{{ $db.n_open_questions() === 1 ? '' : 's' }}</span>
            <span class="grey-text"><small> waiting.</small></span>
          </h4>
          <h4>
            <span>{{ $db.model.ca_count[0].count == 0 ? 'No' : $db.model.ca_count[0].count }} CA{{ $db.model.ca_count[0].count === 1 ? '' : 's' }}</span>
            <span class="grey-text"><small> at OH.</small></span>
          </h4>
          <h4>
            <span>{{ $db.model.queue_meta[0].time_limit }} min{{ $db.model.queue_meta[0].time_limit === 1 ? '' : 's' }}</span>
            <span class="grey-text"><small> per student.</small></span>
          </h4>
        </div>
      </div>
    </div>

  	<!-- Questions Table -->
    <div class="row">
      <div class="card">
        <div class="card-content">
          <span class="card-title black-text">
            Queue
          </span>
          <div ng-if="$db.get_question_list().length === 0">
            <div class="divider"></div>
            <div class="section grey-text">
              <p>The queue is empty.</p>
            </div>
          </div>
        </div>
        <ul class="collection" ng-if="$db.get_question_list().length > 0">
          <li class="collection-item {{ q.state === 'frozen' ? 'grey-text' : '' }}" ng-repeat="q in $db.get_question_list()">
            <h5>
              {{ q.first_name }} {{ q.last_name }}&nbsp;&nbsp;<small>{{ q.location }}</small>
              <span class="badge">{{ q.state === 'frozen' ? 'Frozen' : '' }}</span>
            </h5>
            <p ng-if="q.help_text">{{ q.topic }}: {{ q.help_text }}</p>
            <p ng-if="!q.help_text">{{ q.topic }}: <em>No additional details.</em></p>
          </li>
        </ul>
      </div>
    </div>

     <!-- Answer Question Modal -->
     <div class="modal modal-fixed-footer" id="modalanswerquestion">
          <div class="modal-content">
          	<h3 class="center"> Answering Question </h3>
						<br />
          	<div class="center">
								<h5>You are answering {{ $db.model['current_question'][0].first_name + '\'s'}} question in room {{ $db.model['current_question'][0].location}} . </h5>
								<br />
								<h5>Topic: {{ $db.model['current_question'][0].topic }} </h5>
								<br />
								<h5>Description: {{ $db.model['current_question'][0].help_text }} </h5>
          	</div>
          </div>
          <div class="modal-footer">
          		<div class="left">
          			<a id="kick_q" ng-click="$db.kick_question()" class="waves-effect waves-light btn red">Kick</a>
          		</div>
          		<div class="right">
	          		<a id="finish_q" ng-click="$db.finish_question()" class="waves-effect waves-light btn lightblue">Finish</a>
	          		<a id="freeze_q" ng-click="$db.freeze_question()" style="margin-right: 5px" class="waves-effect waves-light btn blue">Freeze</a>
          		</div>
          </div>
      </div>




	</div>
	</div>


</div>





